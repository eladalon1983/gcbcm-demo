<html>
  <head>
    <meta charset="utf-8" />
    <meta name="mobile-web-app-capable" content="no" />
    <meta
      http-equiv="origin-trial"
      content="AqHueJjojXilmpAO03Hk+c4cMmK0ts1m20RpGDutQOyb68KsKOPVQ3UyfWaSNVt068dfPcHTtYVvQkbF9JBuKwMAAABueyJvcmlnaW4iOiJodHRwczovL2VsYWRhbG9uMTk4My5naXRodWIuaW86NDQzIiwiZmVhdHVyZSI6IkdldEN1cnJlbnRCcm93c2luZ0NvbnRleHRNZWRpYSIsImV4cGlyeSI6MTYyOTg0OTU5OX0="
    />
    <link rel="icon" href="#" />
    <title>get-current-tab</title>
  </head>
  <body>
    <div id="container">
      <h1>
        <span>Capture-Current-Tab</span>
      </h1>
      <p>Expect the Hall of Mirrors effect.</p>
      <video id="video" autoplay playsinline></video>
      <button id="gcbcm" onclick="gcbcmClicked();">Capture-Current-Tab</button>
      <div id="errorMsg" style="color: red"></div>
      <p>
        Display the video stream from
        <code>getCurrentBrowsingContextMedia()</code> in a video element.
      </p>
    </div>
    <script>
      async function gcbcmClicked(e) {
        document.querySelector("#errorMsg").innerHTML = "";
        try {
          const stream =
            await navigator.mediaDevices.getCurrentBrowsingContextMedia({
              video: true,
              audio: true,
            });
          document.querySelector("video").srcObject = stream;
        } catch (e) {
          document.querySelector(
            "#errorMsg"
          ).innerHTML += `<p>getUserMedia error: ${e.name}</p>`;
        }
      }
    </script>
  </body>
</html>
